(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{273:function(t,e,n){"use strict";n.r(e);n(118),n(39),n(54);var r=n(10),o={props:{scores:{type:Array,default:function(){return[]}}},methods:{getBestScore:function(t){return t.reduce((function(t,e){return t<parseInt(e.tour1)&&(t=e.tour1),t}),0)}}},l=n(35),c=n(87),v=n.n(c),d=n(198),f=n(193),m=n(267),_=n(201),h=n(194),x=n(205),w=n(208),y=n(179),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.scores.length?n("v-card",[n("v-card-text",{staticClass:"pa-0"},[n("v-list-item",[n("v-list-item-avatar",{attrs:{tile:""}},[n("v-icon",{attrs:{color:"cyan"}},[t._v("mdi-trophy-variant")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-subtitle",{staticClass:"grey--text caption"},[t._v("\n          Tournament name\n        ")]),t._v(" "),n("v-list-item-title",[t._v("\n          "+t._s(t.scores[0].lib_cpt)+"\n        ")])],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",{staticClass:"pa-0"},[n("v-list-item",{attrs:{dense:""}},[n("v-list-item-title",[t._v("\n        Nombre de participants\n      ")]),t._v(" "),n("v-list-item-action",{staticClass:"font-weight-light text-right justify-end"},[t._v("\n        "+t._s(t.scores.length)+"\n      ")])],1),t._v(" "),n("v-list-item",{attrs:{dense:""}},[n("v-list-item-content",[n("v-list-item-title",[t._v("\n          Meilleur score\n        ")]),t._v(" "),n("v-list-item-subtitle",{staticClass:"grey--text caption"},[t._v("\n          brut stableford\n        ")])],1),t._v(" "),n("v-list-item-action",{staticClass:"font-weight-light text-right justify-end"},[t._v("\n        "+t._s(t.getBestScore(t.scores))+"\n      ")])],1)],1)],1):t._e()}),[],!1,null,"3253ab24",null),V=component.exports;v()(component,{VCard:d.a,VCardText:f.a,VDivider:m.a,VIcon:_.a,VListItem:h.a,VListItemAction:x.a,VListItemAvatar:w.a,VListItemContent:y.a,VListItemSubtitle:y.b,VListItemTitle:y.c});var C={components:{tournamentCard:V},data:function(){return{results:[],loading:!1,done_count:0,total_items:0,controller:null,golf_id:"83502d985595aba6d37f5ac0d35c42f0"}},methods:{fetchResults:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.results=[],t.controller=new AbortController,n=t.controller.signal,t.loading=!t.loading,e.next=6,fetch("http://localhost:3001/scrap/"+t.golf_id,{method:"GET",signal:n});case 6:r=e.sent,t.total_items=r.headers.get("total-items"),o=r.body.pipeThrough(new TextDecoderStream).pipeThrough(t.splitStream("\n")).pipeThrough(t.parseJSON()),t.readScrapStream(o.getReader());case 10:case"end":return e.stop()}}),e)})))()},abortRequest:function(){var t=this;this.controller.abort(),setTimeout((function(){return t.loading=!t.loading}),500)},readScrapStream:function(t){var e=this;t.read().then((function(n){if(e.done_count++,n.done)return console.log("The stream was already closed!"),void setTimeout((function(){return e.loading=!e.loading}),500);n.value&&e.results.push(JSON.parse(n.value)),e.readScrapStream(t)}),(function(t){return console.error("The stream became errored and cannot be read from!",t)&&setTimeout((function(){return e.loading=!e.loading}),500)}))},splitStream:function(t){var e="";return new TransformStream({transform:function(n,r){var o=(e+=n).split(t);o.slice(0,-1).forEach((function(t){return r.enqueue(t)})),e=o[o.length-1]},flush:function(t){e&&t.enqueue(e)}})},parseJSON:function(){return new TransformStream({transform:function(t,e){e.enqueue(JSON.parse(JSON.stringify(t)))}})}},computed:{golf:function(){return this.results.find((function(t,i){return 0===i}))&&this.results.find((function(t,i){return 0===i}))[0]||{}}}},S=n(274),T=n(275),I=n(268),k=n(269),L=n(270),A=n(271),N=n(272),O=n(261),R=Object(l.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","pa-0":""}},[n("v-app-bar",{staticClass:"align-center",attrs:{app:"",extended:"",color:"cyan",dark:""},scopedSlots:t._u([{key:"extension",fn:function(){return[n("v-card",{staticClass:"transparent",attrs:{width:"360",flat:""}},[n("v-text-field",{attrs:{"hide-details":"",dense:"",filled:"","clear-icon":"mdi-close-circle",clearable:"",label:"Results page ID",type:"text"},on:{"click:clear":function(e){t.golf_id=!1}},model:{value:t.golf_id,callback:function(e){t.golf_id=e},expression:"golf_id"}})],1),t._v(" "),n("v-spacer"),t._v(" "),t.loading?t._e():n("v-btn",{attrs:{outlined:"",loading:t.loading},on:{click:function(e){return t.fetchResults()}}},[t._v("\n        start scrapping!\n      ")]),t._v(" "),t.loading&&t.total_items>0?n("span",{staticClass:"mr-3 display-1 font-weight-light"},[t._v(t._s(Math.floor(t.done_count/t.total_items*100))+"%")]):t._e(),t._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{color:"error",dark:""},on:{click:function(e){return t.abortRequest()}}},[t._v("\n        Abort request\n      ")])]},proxy:!0}])},[n("v-toolbar-title",{staticClass:"font-weight-bold text-uppercase"},[t._v("\n      FFG Scrap example\n    ")]),t._v(" "),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:"",href:"https://github.com/pirony/ffgscrap",target:"_blank"}},[n("v-icon",[t._v("\n        mdi-github\n      ")])],1)],1),t._v(" "),n("v-container",{staticClass:"white",attrs:{fluid:""}},[n("v-container",{staticClass:"grey--text",attrs:{"grid-list-xl":""}},[n("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.golf.lib_ter,expression:"golf.lib_ter"}]},[n("v-flex",{attrs:{xs12:""}},[n("v-list-item",[n("v-list-item-avatar",{attrs:{tile:"",color:"cyan",size:"64"}},[n("v-icon",{attrs:{dark:"",large:""}},[t._v("mdi-golf")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-subtitle",{staticClass:"grey--text"},[t._v("\n                Club ID: "+t._s(t.golf.glf_cpt)+"\n              ")]),t._v(" "),n("v-list-item-title",{staticClass:"display-1 text-uppercase font-weight-black"},[t._v("\n                "+t._s(t.golf.lib_ter)+"\n              ")])],1),t._v(" "),n("v-list-item-action",{staticClass:"font-weight-light text-right justify-end cyan--text headline"},[t._v("\n              "+t._s(t.done_count)+"/"+t._s(t.total_items)+"\n            ")])],1)],1)],1),t._v(" "),n("v-layout",{attrs:{wrap:""}},t._l(t.results,(function(t){return n("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[n("transition",{attrs:{name:"slide-y-reverse-transition",appear:""}},[n("tournament-card",{attrs:{scores:t}})],1)],1)})),1)],1)],1)],1)}),[],!1,null,"b26ef9fc",null);e.default=R.exports;v()(R,{VAppBar:S.a,VBtn:T.a,VCard:d.a,VContainer:I.a,VFlex:k.a,VIcon:_.a,VLayout:L.a,VListItem:h.a,VListItemAction:x.a,VListItemAvatar:w.a,VListItemContent:y.a,VListItemSubtitle:y.b,VListItemTitle:y.c,VSpacer:A.a,VTextField:N.a,VToolbarTitle:O.a})}}]);